<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>Interactive Whiteboard</title>
    <link rel="stylesheet" href="style.css" />
    <script>
        // Redirect to login if username is not found in localStorage
        if (!localStorage.getItem("username")) {
          window.location.href = "login.html";
        }
    </script>
    <script src="/socket.io/socket.io.js" defer></script>
    <script src="script.js" defer></script>
</head>
<body class="light">
<canvas id="canvas"></canvas>

<div class="toolbar-container">
    <div class="toolbar">

        <div class="toolbar-group">
            <div class="group-label">Shapes</div>
            <div class="group-buttons">
                <button id="rectangle" class="tool-btn" title="Rectangle"><img src="icon/square.svg" alt="Rectangle" /></button>
                <button id="circle" class="tool-btn" title="Circle"><img src="icon/circle.svg" alt="Circle" /></button>
                <button id="line" class="tool-btn" title="Line"><img src="icon/line.svg" alt="Line" /></button>
                <button id="triangle" class="tool-btn" title="Triangle"><img src="icon/triangle.svg" alt="Triangle" /></button>
                <button id="arrow" class="tool-btn" title="Arrow"><img src="icon/arrow.svg" alt="Arrow" /></button>
            </div>
        </div>

        <div class="toolbar-group">
            <div class="group-label">Tools</div>
            <div class="group-buttons">
                <button id="pen" class="tool-btn active" title="Pen"><img src="icon/pen.svg" alt="Pen" /></button>
                <button id="eraser" class="tool-btn" title="Eraser"><img src="icon/eraser.svg" alt="Eraser" /></button>
                <button id="text" class="tool-btn" title="Text"><img src="icon/text.svg" alt="Text" /></button>
            </div>
        </div>

        <div class="toolbar-group">
            <div class="group-label">Brush</div>
            <div class="group-buttons">
                <input type="color" id="colorPicker" title="Color Picker" value="#000000" />
                <input type="range" id="size-slider" min="1" max="100" value="5" title="Brush Size" />
                <input type="range" id="eraserSize" min="5" max="100" value="20" title="Eraser Size" />
            </div>
        </div>

        <div class="toolbar-group">
            <div class="group-label">Board</div>
            <div class="group-buttons">
                <button id="uploadImageBtn" title="Upload Image"><img src="icon/upload.svg" alt="Upload" /></button>
                <input type="file" id="imageUpload" accept="image/*" style="display: none;" />
                <button id="save" title="Save PNG"><img src="icon/save.svg" alt="Save" /></button>
                <button id="clear" title="Clear Board"><img src="icon/clear.svg" alt="Clear" /></button>
            </div>
        </div>

        <div class="toolbar-group">
            <div class="group-label">Zoom</div>
            <div class="group-buttons">
                <button id="zoomIn" title="Zoom In"><img src="icon/zoom-in.svg" alt="Zoom In" /></button>
                <button id="zoomOut" title="Zoom Out"><img src="icon/zoom-out.svg" alt="Zoom Out" /></button>
            </div>
        </div>

        <div class="toolbar-group">
            <div class="group-label">Theme</div>
            <div class="group-buttons">
                <button id="lightTheme" title="Light"><img src="icon/light.svg" alt="Light" /></button>
                <button id="darkTheme" title="Dark"><img src="icon/dark.svg" alt="Dark" /></button>
                <button id="colorfulTheme" title="Colorful"><img src="icon/colorful.svg" alt="Colorful" /></button>
            </div>
        </div>

        <div class="toolbar-group">
            <div class="group-label">User</div>
            <div class="group-buttons user-info">
                <span>Hi, <script>document.write(localStorage.getItem("username"))</script>!</span>
                <button onclick="logout()" class="logout" title="Logout"><img src="icon/logout.svg" alt="Logout" /></button>
            </div>
        </div>

    </div>
</div>

<div class="sidebar-right">
    <div class="session-info">
        <h4>Share Session</h4>
        <div style="font-size: 12px; word-wrap: break-word; margin-bottom: 5px;">
            <span id="sessionLink" style="font-weight: bold;"></span>
        </div>
        <button onclick="copyLink()" style="width: 100%; padding: 5px; font-size: 12px;">Copy Link</button>
        <h4 style="margin-top: 15px;">Session ID</h4>
        <p id="sessionIdDisplay">Loading...</p>
    </div>

    <div id="userListBox">
        <h4>ðŸŸ¢ Online Users</h4>
        <ul id="userList"></ul>
    </div>

    <div id="chatBox">
        <h4>ðŸ’¬ Chat</h4>
        <div id="chatMessages"></div>
        <form id="chatForm">
            <input id="chatInput" type="text" placeholder="Message..." autocomplete="off" />
            <button type="submit">âž¤</button>
        </form>
    </div>
</div>

</body>
</html>